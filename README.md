```
Reader Agent → Categorizer Agent
                     ↓
             Validator Agent
            ↙                ↘
     Self-Healer ←––– if validation fails
```
```
Input (file or web link)
        ↓
Reader Agent
    → Extract metadata (summary, keywords, images_text, video_text)
    → Generate embedding for the case study
    → Store metadata + embedding in Chroma
        ↓
Categorizer Agent
    → Query Chroma for top-N similar case studies
    → For each top-N neighbor:
        → LLM semantic check: validate if category/domain can be inherited
    → Combine embedding similarity + LLM semantic agreement → final category/domain + confidence
    → If no similar case or low confidence → LLM assigns category/domain
    → Update Chroma with enriched metadata + embedding
        ↓
Validator Agent
    → Check category/domain confidence against thresholds
    → Check consistency with similar case studies (query Chroma if needed)
    → Flag low-confidence or inconsistent entries
        ↓
Self-Healer Agent
    → Re-run hybrid categorization for flagged entries
    → Update metadata + confidence
    → Update Chroma
        ↓
Final validated metadata.json stored in Chroma
```
## 1. Reader agent
**Goal**: Extract structured metadata from any input (file or web link), handling text, images, videos, and embedded text.
**Autonomy**: 
- Decide which tool to invoke depending on input type or content detected.
**Input**:
- File formats: PPTX, PDF, DOCX, TXT, CSV
- Media: JPG, PNG, MP4, MOV
- Web links: HTML content, images, embedded media
**Output**:
```
{
    "file_name": "...",
    "summary": "...",
    "technologies_used": ["...", "..."],
    "images_text": ["Text detected in images"],
    "video_text": ["Text detected in video"],
    "domain": null,
    "category": null,
}
```

## 2. Categorizer agent
**Goal**: Assign the category (services provided) and domain (industry) to each case study based on the metadata extracted by the Reader Agent, ensuring consistency across similar case studies.
**Autonomy**:
- Decide whether to inherit category/domain from previously categorized similar case studies (via embedding similarity).
- Decide whether to invoke LLM classification if similarity is below threshold.
**Input**:
- Metadata JSON generated by Reader Agent
**Output**: Append metadata
```
{
    "file_name": "...",
    "summary": "...",
    "technologies_used": ["...", "..."],
    "images_text": ["..."],
    "video_text": ["..."],
    "category": "Procurement",
    "domain": "Energy",
    "category_confidence": 0.96,
    "domain_confidence": 0.97
}

```

## 3. Validator Agent
**Goal**: Ensure that the category and domain assigned by the Categorizer Agent are accurate, consistent, and complete. Flag issues or inconsistencies for correction.
**Autonomy**:
- Decide if a case study’s classification is valid based on confidence thresholds and internal rules.
- Decide whether to trigger the Self-Healer Agent if low-confidence or inconsistent labels are detected.
**Input**:
- Metadata JSON from Categorizer Agent
**Output**:
- Validation report with status for each field

## 4. Self-Healer Agent
**Goal**: Automatically correct or improve any low-confidence or inconsistent category/domain assignments identified by the Validator Agent.
**Autonomy**:
- Decide which fields need re-generation (category, domain, or both).
- Re-invoke the Categorizer tools (embedding similarity or LLM classifier) selectively.
- Optionally re-query Reader Agent if metadata is incomplete or ambiguous.
**Input**:
- Metadata JSON from Categorizer Agent
- Validation report from Validator Agent
